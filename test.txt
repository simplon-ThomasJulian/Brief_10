irate(container_cpu_usage_seconds_total{pod="voteapp-d5659c9bc-248pc"}[5m])
irate(container_cpu_usage_seconds_total{pod="voteapp-d5659c9bc-zr6hk"}[5m])
sum by (namespace) (kube_pod_info)
sum((container_memory_usage_bytes{container!="POD",container!=""} - on (namespace,pod,container) avg by (namespace,pod,container)(kube_pod_container_resource_requests{resource="memory"})) * -1 >0 ) / (1024*1024*1024)

irate(container_cpu_usage_seconds_total{container="voteapp"}[5m])



az group create --name kubi2vin --location westeurope
az aks create -g kubi2vin -n miniku --ssh-key-value ./.ssh/id_rsa.pub --node-count 2 --enable-managed-identity -a ingress-appgw --appgw-name Applicationgateway --appgw-subnet-cidr "10.225.0.0/16"
az aks get-credentials -g kubi2vin -n miniku


helm upgrade --install promtail --namespace prod grafana/promtail
helm upgrade --install loki --namespace=prod grafana/loki-stack

kubectl get secret --namespace prod grafana -o jsonpath="{.data.admin-password}" | base64 --decode ; echo
